!function(e){function t(t){for(var r,o,i=t[0],u=t[1],l=t[2],f=0,p=[];f<i.length;f++)o=i[f],a[o]&&p.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(c&&c(t);p.length;)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={0:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;s.push([175,1]),n()}({173:function(e,t,n){var r={"./af":20,"./af.js":20,"./ar":21,"./ar-dz":22,"./ar-dz.js":22,"./ar-kw":23,"./ar-kw.js":23,"./ar-ly":24,"./ar-ly.js":24,"./ar-ma":25,"./ar-ma.js":25,"./ar-sa":26,"./ar-sa.js":26,"./ar-tn":27,"./ar-tn.js":27,"./ar.js":21,"./az":28,"./az.js":28,"./be":29,"./be.js":29,"./bg":30,"./bg.js":30,"./bm":31,"./bm.js":31,"./bn":32,"./bn.js":32,"./bo":33,"./bo.js":33,"./br":34,"./br.js":34,"./bs":35,"./bs.js":35,"./ca":36,"./ca.js":36,"./cs":37,"./cs.js":37,"./cv":38,"./cv.js":38,"./cy":39,"./cy.js":39,"./da":40,"./da.js":40,"./de":41,"./de-at":42,"./de-at.js":42,"./de-ch":43,"./de-ch.js":43,"./de.js":41,"./dv":44,"./dv.js":44,"./el":45,"./el.js":45,"./en-SG":46,"./en-SG.js":46,"./en-au":47,"./en-au.js":47,"./en-ca":48,"./en-ca.js":48,"./en-gb":49,"./en-gb.js":49,"./en-ie":50,"./en-ie.js":50,"./en-il":51,"./en-il.js":51,"./en-nz":52,"./en-nz.js":52,"./eo":53,"./eo.js":53,"./es":54,"./es-do":55,"./es-do.js":55,"./es-us":56,"./es-us.js":56,"./es.js":54,"./et":57,"./et.js":57,"./eu":58,"./eu.js":58,"./fa":59,"./fa.js":59,"./fi":60,"./fi.js":60,"./fo":61,"./fo.js":61,"./fr":62,"./fr-ca":63,"./fr-ca.js":63,"./fr-ch":64,"./fr-ch.js":64,"./fr.js":62,"./fy":65,"./fy.js":65,"./ga":66,"./ga.js":66,"./gd":67,"./gd.js":67,"./gl":68,"./gl.js":68,"./gom-latn":69,"./gom-latn.js":69,"./gu":70,"./gu.js":70,"./he":71,"./he.js":71,"./hi":72,"./hi.js":72,"./hr":73,"./hr.js":73,"./hu":74,"./hu.js":74,"./hy-am":75,"./hy-am.js":75,"./id":76,"./id.js":76,"./is":77,"./is.js":77,"./it":78,"./it-ch":79,"./it-ch.js":79,"./it.js":78,"./ja":80,"./ja.js":80,"./jv":81,"./jv.js":81,"./ka":82,"./ka.js":82,"./kk":83,"./kk.js":83,"./km":84,"./km.js":84,"./kn":85,"./kn.js":85,"./ko":86,"./ko.js":86,"./ku":87,"./ku.js":87,"./ky":88,"./ky.js":88,"./lb":89,"./lb.js":89,"./lo":90,"./lo.js":90,"./lt":91,"./lt.js":91,"./lv":92,"./lv.js":92,"./me":93,"./me.js":93,"./mi":94,"./mi.js":94,"./mk":95,"./mk.js":95,"./ml":96,"./ml.js":96,"./mn":97,"./mn.js":97,"./mr":98,"./mr.js":98,"./ms":99,"./ms-my":100,"./ms-my.js":100,"./ms.js":99,"./mt":101,"./mt.js":101,"./my":102,"./my.js":102,"./nb":103,"./nb.js":103,"./ne":104,"./ne.js":104,"./nl":105,"./nl-be":106,"./nl-be.js":106,"./nl.js":105,"./nn":107,"./nn.js":107,"./pa-in":108,"./pa-in.js":108,"./pl":109,"./pl.js":109,"./pt":110,"./pt-br":111,"./pt-br.js":111,"./pt.js":110,"./ro":112,"./ro.js":112,"./ru":113,"./ru.js":113,"./sd":114,"./sd.js":114,"./se":115,"./se.js":115,"./si":116,"./si.js":116,"./sk":117,"./sk.js":117,"./sl":118,"./sl.js":118,"./sq":119,"./sq.js":119,"./sr":120,"./sr-cyrl":121,"./sr-cyrl.js":121,"./sr.js":120,"./ss":122,"./ss.js":122,"./sv":123,"./sv.js":123,"./sw":124,"./sw.js":124,"./ta":125,"./ta.js":125,"./te":126,"./te.js":126,"./tet":127,"./tet.js":127,"./tg":128,"./tg.js":128,"./th":129,"./th.js":129,"./tl-ph":130,"./tl-ph.js":130,"./tlh":131,"./tlh.js":131,"./tr":132,"./tr.js":132,"./tzl":133,"./tzl.js":133,"./tzm":134,"./tzm-latn":135,"./tzm-latn.js":135,"./tzm.js":134,"./ug-cn":136,"./ug-cn.js":136,"./uk":137,"./uk.js":137,"./ur":138,"./ur.js":138,"./uz":139,"./uz-latn":140,"./uz-latn.js":140,"./uz.js":139,"./vi":141,"./vi.js":141,"./x-pseudo":142,"./x-pseudo.js":142,"./yo":143,"./yo.js":143,"./zh-cn":144,"./zh-cn.js":144,"./zh-hk":145,"./zh-hk.js":145,"./zh-tw":146,"./zh-tw.js":146};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id=173},175:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),s=n(17),o=n(18),i=function(e){var t=e.cache.get("api"),n=a.a.create({adapter:Object(s.a)(Object(o.a)(a.a.defaults.adapter,{defaultCache:t}))});return n.defaults.baseURL=e.apiURL,n.defaults.headers.common.Accept="application/json",n.interceptors.response.use(function(e){return e},function(e){switch(e.response.status){case 401:break;case 502:case 504:console.log("fluro.api > connection error retrying"),Fluro.api.request(e.config);break;default:console.log("fluro.api > connection error",e)}return Promise.reject(e)}),n},u=function(e){if(!e.api)throw new Error("Can't Instantiate FluroAuth before FluroAPI exists");var t,n={},r={};function a(){var e=n.user;r.onChange&&r.onChange(e)}function s(e){r.debug&&console.log(e)}return r.set=function(e){return n.user=e,s("fluro.auth > user set"),a()},r.logout=function(){return delete n.user,e.cache.reset(),s("fluro.auth > user logout"),a()},r.changeAccount=function(t,n){console.log("Change account",t),t=e.utils.getStringID(t),n||(n={});var a=!0;n.disableAutoAuthenticate&&(a=!1);var s=e.api.post(`/token/account/${t}`);return s.then(function(t){a&&(e.cache.reset(),r.set(t.data))},function(e){console.log("ERROR",e)}),s},r.login=function(t,a){a||(a={});var s=!0;return a.disableAutoAuthenticate&&(s=!1),new Promise(function(o,i){if(!t)return i({message:"Missing credentials!"});if(!t.username||!t.username.length)return i({message:"Username was not provided"});if(!t.password||!t.password.length)return i({message:"Password was not provided"});var u=e.apiURL+"/token/login";a.application&&(u=`${e.domain||""}/fluro/application/login`),a.managedAccount&&(u=e.apiURL+"/managed/"+a.managedAccount+"/login"),a.url&&(u=a.url),e.api.post(u,t,{bypassInterceptor:!0}).then(function(e){s&&(n.user=e.data,r.onChange&&r.onChange(n.user)),o(e)},i)})},r.signup=function(t,a){a||(a={});var s=!0;return a.disableAutoAuthenticate&&(s=!1),new Promise(function(o,i){if(!t)return i({message:"No details provided"});if(!t.firstName||!t.firstName.length)return i({message:"First Name was not provided"});if(!t.lastName||!t.lastName.length)return i({message:"Last Name was not provided"});if(!t.username||!t.username.length)return i({message:"Email/Username was not provided"});if(!t.password||!t.password.length)return i({message:"Password was not provided"});if(!t.confirmPassword||!t.confirmPassword.length)return i({message:"Confirm Password was not provided"});if(t.confirmPassword!=t.password)return i({message:"Your passwords do not match"});var u=e.apiURL+"/token/signup";a.application&&(u=`${e.domain||""}/fluro/application/signup`),a.url&&(u=a.url),e.api.post(u,t,{bypassInterceptor:!0}).then(function(e){s&&(n.user=e.data,r.onChange&&r.onChange(n.user)),o(e)},i)})},r.sendResetPasswordRequest=function(t,n){return n||(n={}),new Promise(function(r,a){if(!t)return a({message:"No details provided"});if(!t.username||!t.username.length)return a({message:"Email/Username was not provided"});t.email=t.username;var s=e.apiURL+"/resend";n.application&&(s=`${e.domain||""}/fluro/application/forgot`),n.url&&(s=n.url),e.api.post(s,t,{bypassInterceptor:!0}).then(r,a)})},r.refreshAccessToken=function(a,o){return t||(t=new Promise(function(i,u){s("fluro.auth > refresh token"),e.api.post("token/refresh",{refreshToken:a,managed:o},{bypassInterceptor:!0}).then(function(e){Object.assign(n.user,e.data),s("fluro.auth > token refreshed"),r.onChange&&r.onChange(n.user),i(e.data.token),t=null},u)}))},r.getCurrentToken=function(){return _.get(n,"user.token")||e.applicationToken},r.getCurrentUser=function(){return _.get(n,"user")},e.api.interceptors.request.use(function(t){if(t.bypassInterceptor)return t;var a=t,o=_.get(n,"user.token"),i=_.get(n,"user.refreshToken");if(!o)return e.applicationToken&&e.applicationToken.length?(a.headers.Authorization="Bearer "+e.applicationToken,s("fluro.auth > using app token"),a):(s("fluro.auth > no token"),a);if(a.headers.Authorization="Bearer "+o,s("fluro.auth > using user token"),!i)return s("fluro.auth > no refresh token"),a;var u=new Date;u.setSeconds(u.getSeconds()+10);var l=_.get(n,"user.expires"),c=new Date(l);if(!r.debug&&u<c)return a;var f="managed"==_.get(n,"user.accountType");return s("fluro.auth > token expired"),new Promise(function(e,t){r.refreshAccessToken(i,f).then(function(t){return s("Token refreshed"),a.headers.Authorization="Bearer "+t,e(a)},t)})},function(e){return Promise.reject(e)}),e.api.interceptors.response.use(function(e){return e},function(e){var t=e.response.status;switch(s("fluro.auth > error"),t){case 401:r.logout()}return Promise.reject(e)}),r},l=function(e){window||(window={screen:{width:1920,height:1080}});var t=window.devicePixelRatio>1,n={};function r(t,n){if(n.extension&&n.extension.length?(n.title&&n.title.length?(t+=`/file/${n.title}.${n.extension}`,delete n.title):n.filename&&n.filename.length?(t+=`/file/${n.filename}.${n.extension}`,delete n.filename):t+=`/file/file.${n.extension}`,delete n.extension):n.filename&&n.filename.length&&(t+=`/file/${n.filename}`,delete n.filename),!n.withoutToken){var r=e.auth.getCurrentToken();!n.access_token&&r&&(n.access_token=r)}return t}return n.getUrl=function(t,n){if((t=e.utils.getStringID(t))&&String(t).length){n||(n={});var a=`${e.apiURL}/get/${t}`;a=r(a,n);var s=e.utils.mapParameters(n);return s.length&&(a+="?"+s),a}},n.avatarUrl=function(t,n,a){if((t=e.utils.getStringID(t))&&String(t).length){a||(a={}),n||(n="contact");var s=`${e.apiURL}/get/avatar/${n}/${t}`;s=r(s,a);var o=e.utils.mapParameters(a);return o.length&&(s+="?"+o),s}},n.coverImage=function(t,n,a){if((t=e.utils.getStringID(t))&&String(t).length){a||(a={}),n||(n="event");var s=`${e.apiURL}/get/${n}/${t}`;s=r(s,a);var o=e.utils.mapParameters(a);return o.length&&(s+="?"+o),s}},n.downloadUrl=function(t,n){if((t=e.utils.getStringID(t))&&String(t).length){n||(n={});var a=`${e.apiURL}/download/${t}`;a=r(a,n);var s=e.utils.mapParameters(n);return s.length&&(a+="?"+s),a}},n.posterUrl=function(n,a,s,o){if((n=e.utils.getStringID(n))&&String(n).length){o||(o={});var i,u=window.screen.width||1920;window.screen.width,i=t?1920:1200,u<=768&&(i=t?1536:768),u<=320&&(i=t?640:320),a||s?(a&&(o.w=a,s||(o.h=Math.round(a*(9/16)))),s&&(o.h=s)):(o.w=i,o.h=Math.round(i*(9/16)));var l=`${e.apiURL}/get/${n}/poster`;l=r(l,o);var c=e.utils.mapParameters(o);return c.length&&(l+="?"+c),l}},n.imageUrl=function(n,a,s,o){if((n=e.utils.getStringID(n))&&String(n).length){o||(o={});var i,u=e.apiURL+"/get/"+n;i=t?1920:1200,window.screen.width<=768&&(i=t?1536:768),window.screen.width<=320&&(i=t?640:320),a||s?(a&&(o.w=a),s&&(o.h=s)):o.w=i,o.quality||(o.quality=90),u=r(u,o);var l=e.utils.mapParameters(o);return l.length&&(u+="?"+l),u}},n.filesize=function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+""+["Bytes","kb","mb","gb","tb"][t]},n},c=n(1),f=n.n(c),p={mapParameters:function(e){return f.a.map(e,function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")},comma:function(e,t){return f.a.chain(e).compact().map(function(e){return t?f.a.get(e,t):e}).value().join(", ")},getStringID:function(e,t){return e?e._id?String(e._id):String(e):e},arrayIDs:function(e,t){return e?f.a.chain(e).compact().map(function(e){return p.getStringID(e,t)}).compact().uniq().value():e},errorMessage:function(e){var t=f.a.chain(["response.data.message","response.data","message"]).map(function(t){return f.a.get(e,t)}).compact().first().value();return t&&t.length?t:String(e)}},d=p,m=n(11),h={},g={reset(){f.a.each(h,function(e,t){e.reset()})},get:e=>h[e]?h[e]:(h[e]=new m.a,h[e])},j=n(6),v=n.n(j);const w={defaultTimezone:Intl.DateTimeFormat().resolvedOptions().timeZone,localDate:function(e,t){var n;(n=e?new Date(e):new Date).getTimezoneOffset();if(t||(t=w.defaultTimezone),t){var r=60*(v.a.tz(n,t).utcOffset()-v()(n).utcOffset())*1e3;new Date(n);n.setTime(n.getTime()+r)}return n},formatDate:function(e,t,n){var r=w.localDate(e,n);return v()(r).format(t)},readableEventDate:function(e,t){var n,r;if(e&&e.startDate){n=w.localDate(e.startDate,e.timezone),r=e.endDate?n:w.localDate(e.endDate,e.timezone),n=v()(n),r=v()(r);var a=n.format("h:mma D MMM YYYY")==r.format("h:mma D MMM YYYY"),s=n.format("YYYY")==r.format("YYYY"),o=n.format("MMM YYYY")==r.format("MMM YYYY"),i=n.format("D MMM YYYY")==r.format("D MMM YYYY");switch(t){case"short":return a?n.format("D MMM"):i?n.format("D MMM"):o?n.format("D")+"-"+r.format("D MMM"):s?n.format("D")+"-"+r.format("D MMM"):n.format("D MMM Y")+" - "+r.format("D MMM Y");default:return a?n.format("h:mma dddd D MMM Y"):i?n.format("h:mma")+" - "+r.format("h:mma dddd D MMM Y"):o?n.format("D")+"-"+r.format("D MMM Y"):s?n.format("D MMM")+" - "+r.format("D MMM Y"):n.format("D MMM Y")+" - "+r.format("D MMM Y")}}}};var b=w,M=function(e,t,n){var r={},a=t;n&&(a="_"+a);var s,o={key:a,name:t,ids:{}},i={};function u(e){Object.assign(o,e.data),c()}function l(e){console.log(t,"stats could not be retrieved"),c()}function c(){s=null}r.dispatch=function(){r.onChange&&r.onChange(o)},r.isStatted=function(e){return f.a.get(o,`ids['${e}']`)},r.isStatting=function(e){return i[e]},r.toggle=function(e){if(!n)throw Error("Can't use the toggle() method on a non-unique stat");return r.isStatted(e)?r.unset(e):r.set(e)},r.add=function(r){if(n)throw Error("Can't use the add() method on a non-unique stat");var a=`/stat/${r}/${t}`,s=e.api.delete(a);return i[r]=!0,s.then(function(e){o.ids[r]=e.data.total,i[r]=!1},function(){i[r]=!1}),s},r.unset=function(r){if(!n)throw Error("Can't use the unset() method on a non-unique stat");var a=`/stat/${r}/${t}?unique=true`,s=e.api.delete(a);return i[r]=!0,s.then(function(e){delete o.ids[r],i[r]=!1,console.log("unset() complete")},function(){i[r]=!1,console.log("unset() error")}),s},r.set=function(r){if(!n)throw Error("Can't use the set() method on a non-unique stat");var a=`/stat/${r}/${t}?unique=true`,s=e.api.post(a);return i[r]=!0,s.then(function(e){o.ids[r]=!0,i[r]=!1,console.log("set() complete")},function(e){i[r]=!1,"ExistingUniqueStatError"==f.a.get(e,"response.data.name")?(o.ids[r]=!0,console.log("set() complete")):console.log("set() error")}),s},Object.defineProperty(r,"key",{value:a,writable:!1}),Object.defineProperty(r,"name",{value:t,writable:!1}),Object.defineProperty(r,"ids",{value:o.ids,writable:!1}),Object.defineProperty(r,"pending",{value:i,writable:!1}),r.refresh=function(){if(s)return s;var r=`/stat/my/${t}`;n&&(r+="?unique=true");var a=e.api.get(r);return s=a,a.then(u,l),a};var p=r.refresh();return p.then(u,l),s=p,r},k=function(e){if(!e.api)throw new Error("Can't Instantiate FluroStats before FluroAPI exists");var t={stores:{},refresh:function(){var e=[];return f.a.each(t.stores,function(t){e.push(t.refresh())}),Promise.all(e)},getStore:function(n,r){var a=n;return r&&(a="_"+a),t.stores[a]?t.stores[a]:(t.stores[a]=new M(e,n,r),t.stores[a])}};return t},y=function(e){var t={retrieve:function(t,n){return n||(n={}),n.types=t,e.api.post("/defined",n)}};return t},D=function(e){if(!e.api)throw new Error("Can't Instantiate FluroContent before FluroAPI exists");var t={search:function(t,n){return n||(n={}),n.limit||(n.limit=10),new Promise(function(r,a){if(!t||!t.length)return r([]);var s={params:n};e.api.get(`/content/search/${t}`,s).then(function(e){r(e.data)},a)})},query:function(t,n){return t=e.utils.getStringID(t),n||(n={}),new Promise(function(r,a){var s={params:{}};if(n.params&&(s.params=n.params),n.variables){var o=f.a.reduce(n.variables,function(e,t,n){return e[`variables[${n}]`]=t,e},{});f.a.assign(s.params,o)}e.api.get(`/content/_query/${t}`,s).then(function(e){r(e.data)},a)})}};return t},P=function(e){switch(e||(e={}),e.apiURL&&e.apiURL.length||(e.apiURL="production"),e.apiURL){case"production":e.apiURL="https://api.fluro.io";break;case"staging":e.apiURL="https://api.staging.fluro.io";break;case"local":e.apiURL="http://api.fluro.localhost:3000"}var t={apiURL:e.apiURL,applicationToken:e.applicationToken,domain:e.domain||""},n=g;Object.defineProperty(t,"cache",{value:n,writable:!1});var r=d;Object.defineProperty(t,"utils",{value:r,writable:!1});var a=b;Object.defineProperty(t,"date",{value:a,writable:!1});var s=new i(t);Object.defineProperty(t,"api",{value:s,writable:!1});var o=new D(t);Object.defineProperty(t,"content",{value:o,writable:!1});var c=new u(t);Object.defineProperty(t,"auth",{value:c,writable:!1});var f=new l(t);Object.defineProperty(t,"asset",{value:f,writable:!1});new k(t);Object.defineProperty(t,"stats",{value:new k(t),writable:!1});var p=new y(t);return Object.defineProperty(t,"types",{value:p,writable:!1}),t};t.default=P}});