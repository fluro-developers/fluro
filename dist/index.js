!function(e){function t(t){for(var r,s,i=t[0],u=t[1],l=t[2],f=0,h=[];f<i.length;f++)s=i[f],a[s]&&h.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(c&&c(t);h.length;)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={0:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;o.push([175,1]),n()}({173:function(e,t,n){var r={"./af":20,"./af.js":20,"./ar":21,"./ar-dz":22,"./ar-dz.js":22,"./ar-kw":23,"./ar-kw.js":23,"./ar-ly":24,"./ar-ly.js":24,"./ar-ma":25,"./ar-ma.js":25,"./ar-sa":26,"./ar-sa.js":26,"./ar-tn":27,"./ar-tn.js":27,"./ar.js":21,"./az":28,"./az.js":28,"./be":29,"./be.js":29,"./bg":30,"./bg.js":30,"./bm":31,"./bm.js":31,"./bn":32,"./bn.js":32,"./bo":33,"./bo.js":33,"./br":34,"./br.js":34,"./bs":35,"./bs.js":35,"./ca":36,"./ca.js":36,"./cs":37,"./cs.js":37,"./cv":38,"./cv.js":38,"./cy":39,"./cy.js":39,"./da":40,"./da.js":40,"./de":41,"./de-at":42,"./de-at.js":42,"./de-ch":43,"./de-ch.js":43,"./de.js":41,"./dv":44,"./dv.js":44,"./el":45,"./el.js":45,"./en-SG":46,"./en-SG.js":46,"./en-au":47,"./en-au.js":47,"./en-ca":48,"./en-ca.js":48,"./en-gb":49,"./en-gb.js":49,"./en-ie":50,"./en-ie.js":50,"./en-il":51,"./en-il.js":51,"./en-nz":52,"./en-nz.js":52,"./eo":53,"./eo.js":53,"./es":54,"./es-do":55,"./es-do.js":55,"./es-us":56,"./es-us.js":56,"./es.js":54,"./et":57,"./et.js":57,"./eu":58,"./eu.js":58,"./fa":59,"./fa.js":59,"./fi":60,"./fi.js":60,"./fo":61,"./fo.js":61,"./fr":62,"./fr-ca":63,"./fr-ca.js":63,"./fr-ch":64,"./fr-ch.js":64,"./fr.js":62,"./fy":65,"./fy.js":65,"./ga":66,"./ga.js":66,"./gd":67,"./gd.js":67,"./gl":68,"./gl.js":68,"./gom-latn":69,"./gom-latn.js":69,"./gu":70,"./gu.js":70,"./he":71,"./he.js":71,"./hi":72,"./hi.js":72,"./hr":73,"./hr.js":73,"./hu":74,"./hu.js":74,"./hy-am":75,"./hy-am.js":75,"./id":76,"./id.js":76,"./is":77,"./is.js":77,"./it":78,"./it-ch":79,"./it-ch.js":79,"./it.js":78,"./ja":80,"./ja.js":80,"./jv":81,"./jv.js":81,"./ka":82,"./ka.js":82,"./kk":83,"./kk.js":83,"./km":84,"./km.js":84,"./kn":85,"./kn.js":85,"./ko":86,"./ko.js":86,"./ku":87,"./ku.js":87,"./ky":88,"./ky.js":88,"./lb":89,"./lb.js":89,"./lo":90,"./lo.js":90,"./lt":91,"./lt.js":91,"./lv":92,"./lv.js":92,"./me":93,"./me.js":93,"./mi":94,"./mi.js":94,"./mk":95,"./mk.js":95,"./ml":96,"./ml.js":96,"./mn":97,"./mn.js":97,"./mr":98,"./mr.js":98,"./ms":99,"./ms-my":100,"./ms-my.js":100,"./ms.js":99,"./mt":101,"./mt.js":101,"./my":102,"./my.js":102,"./nb":103,"./nb.js":103,"./ne":104,"./ne.js":104,"./nl":105,"./nl-be":106,"./nl-be.js":106,"./nl.js":105,"./nn":107,"./nn.js":107,"./pa-in":108,"./pa-in.js":108,"./pl":109,"./pl.js":109,"./pt":110,"./pt-br":111,"./pt-br.js":111,"./pt.js":110,"./ro":112,"./ro.js":112,"./ru":113,"./ru.js":113,"./sd":114,"./sd.js":114,"./se":115,"./se.js":115,"./si":116,"./si.js":116,"./sk":117,"./sk.js":117,"./sl":118,"./sl.js":118,"./sq":119,"./sq.js":119,"./sr":120,"./sr-cyrl":121,"./sr-cyrl.js":121,"./sr.js":120,"./ss":122,"./ss.js":122,"./sv":123,"./sv.js":123,"./sw":124,"./sw.js":124,"./ta":125,"./ta.js":125,"./te":126,"./te.js":126,"./tet":127,"./tet.js":127,"./tg":128,"./tg.js":128,"./th":129,"./th.js":129,"./tl-ph":130,"./tl-ph.js":130,"./tlh":131,"./tlh.js":131,"./tr":132,"./tr.js":132,"./tzl":133,"./tzl.js":133,"./tzm":134,"./tzm-latn":135,"./tzm-latn.js":135,"./tzm.js":134,"./ug-cn":136,"./ug-cn.js":136,"./uk":137,"./uk.js":137,"./ur":138,"./ur.js":138,"./uz":139,"./uz-latn":140,"./uz-latn.js":140,"./uz.js":139,"./vi":141,"./vi.js":141,"./x-pseudo":142,"./x-pseudo.js":142,"./yo":143,"./yo.js":143,"./zh-cn":144,"./zh-cn.js":144,"./zh-hk":145,"./zh-hk.js":145,"./zh-tw":146,"./zh-tw.js":146};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=173},175:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),o=n(17),s=n(18),i=function(e){var t=e.cache.get("api"),n=a.a.create({adapter:Object(o.a)(Object(s.a)(a.a.defaults.adapter,{defaultCache:t}))});return n.defaults.baseURL=e.apiURL,n.defaults.headers.common.Accept="application/json",n.interceptors.response.use(function(e){return e},function(e){switch(e.response.status){case 401:break;case 502:case 504:console.log("fluro.api > connection error retrying"),Fluro.api.request(e.config);break;default:console.log("fluro.api > connection error",e)}return Promise.reject(e)}),n},u=function(e){if(console.log("FLURO",e),!e.api)throw new Error("Can't Instantiate FluroAuth before FluroAPI exists");var t,n={},r={};function a(){var e=n.user;r.onChange&&r.onChange(e)}function o(e){r.debug&&console.log(e)}return r.set=function(e){return n.user=e,o("fluro.auth > user set"),a()},r.logout=function(){return delete n.user,e.cache.reset(),o("fluro.auth > user logout"),a()},r.changeAccount=function(t,n){console.log("Change account",t),t=e.utils.getStringID(t),n||(n={});var a=!0;n.disableAutoAuthenticate&&(a=!1);var o=e.api.post(`/token/account/${t}`);return o.then(function(t){a&&(e.cache.reset(),r.set(t.data))},function(e){console.log("ERROR",e)}),o},r.login=function(t,a){return a||(a={}),new Promise(function(o,s){if(!t)return s({message:"Missing credentials!"});if(!t.username||!t.username.length)return s({message:"Username was not provided"});if(!t.password||!t.password.length)return s({message:"Password was not provided"});var i=e.apiURL+"/token/login";a.application&&(i="/fluro/application/login"),a.managedAccount&&(i=e.apiURL+"/managed/"+a.managedAccount+"/login"),a.url&&(i=a.url),e.api.post(i,t,{bypassInterceptor:!0}).then(function(e){n.user=e.data,r.onChange&&r.onChange(n.user)},s)})},r.refreshAccessToken=function(a){return t||(t=new Promise(function(s,i){o("fluro.auth > refresh token"),e.api.post("token/refresh",{refreshToken:a},{bypassInterceptor:!0}).then(function(e){Object.assign(n.user,e.data),o("fluro.auth > token refreshed"),r.onChange&&r.onChange(n.user),s(e.data.token),t=null},i)}))},r.getCurrentToken=function(){return _.get(n,"user.token")||e.applicationToken},r.getCurrentUser=function(){return _.get(n,"user")},e.api.interceptors.request.use(function(t){if(t.bypassInterceptor)return t;var a=t,s=_.get(n,"user.token"),i=_.get(n,"user.refreshToken");if(!s)return e.applicationToken&&e.applicationToken.length?(a.headers.Authorization="Bearer "+e.applicationToken,o("fluro.auth > using app token"),a):(o("fluro.auth > no token"),a);if(a.headers.Authorization="Bearer "+s,o("fluro.auth > using user token"),!i)return o("fluro.auth > no refresh token"),a;var u=new Date;u.setSeconds(u.getSeconds()+5);var l=_.get(n,"user.expires"),c=new Date(l);return!r.debug&&u<c?a:(o("fluro.auth > token expired"),new Promise(function(e,t){r.refreshAccessToken(i).then(function(t){return o("Token refreshed"),a.headers.Authorization="Bearer "+t,e(a)},t)}))},function(e){return Promise.reject(e)}),e.api.interceptors.response.use(function(e){return e},function(e){var t=e.response.status;switch(o("fluro.auth > error"),t){case 401:r.logout()}return Promise.reject(e)}),r},l=function(e){window||(window={screen:{width:1920,height:1080}});var t=window.devicePixelRatio>1,n={};function r(t,n){if(n.extension&&n.extension.length?(n.title&&n.title.length?(n.title,n.extension,delete n.title):n.filename&&n.filename.length?(n.filename,n.extension,delete n.filename):n.extension,delete n.extension):n.filename&&n.filename.length&&(n.filename,delete n.filename),!n.withoutToken){var r=e.auth.getCurrentToken();!n.access_token&&r&&(n.access_token=r)}}return n.getUrl=function(t,n){if((t=e.utils.getStringID(t))&&String(t).length){n||(n={});var a=`${e.apiURL}/get/${t}`;r(0,n);var o=e.utils.mapParameters(n);return o.length&&(a+="?"+o),a}},n.avatarUrl=function(t,n,a){if((t=e.utils.getStringID(t))&&String(t).length){a||(a={}),n||(n="contact");var o=`${e.apiURL}/get/avatar/${n}/${t}`;r(0,a);var s=e.utils.mapParameters(a);return s.length&&(o+="?"+s),o}},n.coverImage=function(t,n,a){if((t=e.utils.getStringID(t))&&String(t).length){a||(a={}),n||(n="event");var o=`${e.apiURL}/get/${n}/${t}`;r(0,a);var s=e.utils.mapParameters(a);return s.length&&(o+="?"+s),o}},n.downloadUrl=function(t,n){if((t=e.utils.getStringID(t))&&String(t).length){n||(n={});var a=`${e.apiURL}/download/${t}`;r(0,n);var o=e.utils.mapParameters(n);return o.length&&(a+="?"+o),a}},n.posterUrl=function(n,a,o,s){if((n=e.utils.getStringID(n))&&String(n).length){s||(s={});var i,u=window.screen.width||1920;window.screen.width,i=t?1920:1200,u<=768&&(i=t?1536:768),u<=320&&(i=t?640:320),a||o?(a&&(s.w=a,o||(s.h=Math.round(a*(9/16)))),o&&(s.h=o)):(s.w=i,s.h=Math.round(i*(9/16)));var l=`${e.apiURL}/get/${n}/poster`;r(0,s);var c=e.utils.mapParameters(s);return c.length&&(l+="?"+c),l}},n.imageUrl=function(n,a,o,s){if((n=e.utils.getStringID(n))&&String(n).length){s||(s={});var i,u=e.apiURL+"/get/"+n;i=t?1920:1200,window.screen.width<=768&&(i=t?1536:768),window.screen.width<=320&&(i=t?640:320),a||o?(a&&(s.w=a),o&&(s.h=o)):s.w=i,s.quality||(s.quality=90),r(0,s);var l=e.utils.mapParameters(s);return l.length&&(u+="?"+l),u}},n.filesize=function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+""+["Bytes","kb","mb","gb","tb"][t]},n},c=n(1),f=n.n(c),h={mapParameters:function(e){return f.a.map(e,function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")},arrayIDs:function(e,t){return e?f.a.chain(e).compact().map(function(e){return h.getStringID(e,t)}).compact().uniq().value():e},errorMessage:function(e){var t=f.a.chain(["response.data.message","response.data","message"]).map(function(t){return f.a.get(e,t)}).compact().first().value();return t&&t.length?t:String(e)},getStringID:function(e,t){return e?e._id?String(e._id):String(e):e}},p=h,d=n(11),g={},j={reset(){f.a.each(g,function(e,t){console.log(`Reset ${t} cache`),e.reset()})},get:e=>g[e]?g[e]:(g[e]=new d.a,console.log("Created new cache",e),g[e])},m=n(6),v=n.n(m);const b={defaultTimezone:Intl.DateTimeFormat().resolvedOptions().timeZone,localDate:function(e,t){var n;(n=e?new Date(e):new Date).getTimezoneOffset();if(t||(t=b.defaultTimezone),t){var r=60*(v.a.tz(n,t).utcOffset()-v()(n).utcOffset())*1e3;new Date(n);n.setTime(n.getTime()+r)}return n},formatDate:function(e,t,n){var r=b.localDate(e,n);return v()(r).format(t)},readableEventDate:function(e,t){var n,r;if(e&&e.startDate){n=b.localDate(e.startDate,e.timezone),r=e.endDate?n:b.localDate(e.endDate,e.timezone),n=v()(n),r=v()(r);var a=n.format("h:mma D MMM YYYY")==r.format("h:mma D MMM YYYY"),o=n.format("YYYY")==r.format("YYYY"),s=n.format("MMM YYYY")==r.format("MMM YYYY"),i=n.format("D MMM YYYY")==r.format("D MMM YYYY");switch(t){case"short":return a?n.format("D MMM"):i?n.format("D MMM"):s?n.format("D")+"-"+r.format("D MMM"):o?n.format("D")+"-"+r.format("D MMM"):n.format("D MMM Y")+" - "+r.format("D MMM Y");default:return a?n.format("h:mma dddd D MMM Y"):i?n.format("h:mma")+" - "+r.format("h:mma dddd D MMM Y"):s?n.format("D")+"-"+r.format("D MMM Y"):o?n.format("D MMM")+" - "+r.format("D MMM Y"):n.format("D MMM Y")+" - "+r.format("D MMM Y")}}}};var w=b,M=function(e,t,n){var r={},a=t;n&&(a="_"+a);var o,s={key:a,name:t,ids:{}},i={};function u(e){console.log("Stats updated"),Object.assign(s,e.data),c()}function l(e){console.log(t,"stats could not be retrieved"),c()}function c(){setTimeout(function(){o=null},500)}r.dispatch=function(){r.onChange&&r.onChange(s)},r.isStatted=function(e){return f.a.get(s,`ids['${e}']`)},r.isStatting=function(e){return i[e]},r.toggle=function(e){if(!n)throw Error("Can't use the toggle() method on a non-unique stat");return r.isStatted(e)?r.unset(e):r.set(e)},r.add=function(r){if(n)throw Error("Can't use the add() method on a non-unique stat");var a=`/stat/${r}/${t}`,o=e.api.delete(a);return i[r]=!0,o.then(function(e){s.ids[r]=e.data.total,i[r]=!1},function(){i[r]=!1}),o},r.unset=function(r){if(!n)throw Error("Can't use the unset() method on a non-unique stat");var a=`/stat/${r}/${t}?unique=true`,o=e.api.delete(a);return i[r]=!0,o.then(function(e){delete s.ids[r],i[r]=!1,console.log("unset() complete")},function(){i[r]=!1,console.log("unset() error")}),o},r.set=function(r){if(!n)throw Error("Can't use the set() method on a non-unique stat");var a=`/stat/${r}/${t}?unique=true`,o=e.api.post(a);return i[r]=!0,o.then(function(e){s.ids[r]=!0,i[r]=!1,console.log("set() complete")},function(e){i[r]=!1,"ExistingUniqueStatError"==f.a.get(e,"response.data.name")?(s.ids[r]=!0,console.log("set() complete")):console.log("set() error")}),o},Object.defineProperty(r,"key",{value:a,writable:!1}),Object.defineProperty(r,"name",{value:t,writable:!1}),Object.defineProperty(r,"ids",{value:s.ids,writable:!1}),Object.defineProperty(r,"pending",{value:i,writable:!1}),r.refresh=function(){if(o)return o;var r=`/stat/my/${t}`;n&&(r+="?unique=true");var a=e.api.get(r);return console.log("New Stat Request"),o=a,a.then(u,l),a};var h=r.refresh();return h.then(u,l),o=h,r},k=function(e){if(!e.api)throw new Error("Can't Instantiate FluroStats before FluroAPI exists");var t={stores:{},refresh:function(){var e=[];return f.a.each(t.stores,function(t){e.push(t.refresh())}),Promise.all(e)},getStore:function(n,r){var a=n;return r&&(a="_"+a),t.stores[a]?t.stores[a]:(t.stores[a]=new M(e,n,r),t.stores[a])}};return t},y=function(e){console.log("CREATED FLURO TYPES");var t={retrieve:function(t,n){return n||(n={}),n.types=t,e.api.post("/defined",n)}};return t},D=function(e){switch(e||(e={}),e.apiURL&&e.apiURL.length||(e.apiURL="production"),e.apiURL){case"production":e.apiURL="https://api.fluro.io";break;case"staging":e.apiURL="https://api.staging.fluro.io";break;case"local":e.apiURL="http://api.fluro.localhost:3000"}var t={apiURL:e.apiURL,applicationToken:e.applicationToken};return Object.defineProperty(t,"cache",{value:j,writable:!1}),Object.defineProperty(t,"utils",{value:p,writable:!1}),Object.defineProperty(t,"date",{value:w,writable:!1}),Object.defineProperty(t,"api",{value:new i(t),writable:!1}),Object.defineProperty(t,"auth",{value:new u(t),writable:!1}),Object.defineProperty(t,"asset",{value:new l(t),writable:!1}),Object.defineProperty(t,"stats",{value:new k(t),writable:!1}),Object.defineProperty(t,"types",{value:new y(t),writable:!1}),console.log("Fluro init()"),t};t.default=D}});