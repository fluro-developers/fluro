!function(e){function t(t){for(var r,o,u=t[0],s=t[1],l=t[2],p=0,f=[];p<u.length;p++)o=u[p],a[o]&&f.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(c&&c(t);f.length;)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,u=1;u<n.length;u++){var s=n[u];0!==a[s]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={0:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var c=s;i.push([40,1]),n()}({40:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),i=n(42),o=n(43),u=function(e){var t=a.a.create({adapter:Object(i.a)(Object(o.a)(a.a.defaults.adapter))});return t.defaults.baseURL=e.apiURL,t.defaults.headers.common.Accept="application/json",t},s=function(e){if(!e.api)throw new Error("Can't Instantiate FluroAuth before FluroAPI exists");var t,n={refreshAccessToken:function(r){return t||(t=new Promise(function(a,i){e.api.post("token/refresh",{refreshToken:r},{bypassInterceptor:!0}).then(function(e){n.user=e.data,n.token=e.data.token,n.refreshToken=e.data.refreshToken,n.expires=e.data.expires,a(e.data.token),t=null},i)}))},getCurrentToken:function(){return n.token||e.applicationToken}};e.api.interceptors.request.use(function(t){if(t.bypassInterceptor)return t;var r=t,a=n.token,i=n.refreshToken;return a?(r.headers.Authorization="Bearer "+a,i?new Date<new Date(n.expires)?r:(console.log("Token expired"),new Promise(function(e,t){n.refreshAccessToken(i).then(function(t){return console.log("Token refreshed"),r.headers.Authorization="Bearer "+t,e(r)},t)})):r):e.applicationToken&&e.applicationToken.length?(r.headers.Authorization="Bearer "+e.applicationToken,r):r},function(e){return Promise.reject(e)}),e.api.interceptors.response.use(function(e){return e},function(t){switch(t.response.status){case 401:delete n.token,delete n.user,delete n.refreshToken,delete n.expires;break;case 502:case 504:return console.log("Retry request"),e.api.request(t.config)}return Promise.reject(t)})},l=function(e){window||(window={screen:{width:1920,height:1080}});var t=window.devicePixelRatio>1,n={};function r(t,n){if(n.extension&&n.extension.length?(n.title&&n.title.length?(n.title,n.extension,delete n.title):n.filename&&n.filename.length?(n.filename,n.extension,delete n.filename):n.extension,delete n.extension):n.filename&&n.filename.length&&(n.filename,delete n.filename),!n.withoutToken){var r=e.auth.getCurrentToken();!n.access_token&&r&&(n.access_token=r)}}return n.getUrl=function(t,n){if(t&&String(t).length){n||(n={});var a=`${e.apiURL}/get/${t}`;r(0,n);var i=e.utils.mapParameters(n);return i.length&&(a+="?"+i),a}},n.avatarUrl=function(t,n,a){if(t&&String(t).length){a||(a={}),n||(n="contact");var i=`${e.apiURL}/get/avatar/${n}/${t}`;r(0,a);var o=e.utils.mapParameters(a);return o.length&&(i+="?"+o),i}},n.coverImage=function(t,n,a){if(t&&String(t).length){a||(a={}),n||(n="event");var i=`${e.apiURL}/get/${n}/${t}`;r(0,a);var o=e.utils.mapParameters(a);return o.length&&(i+="?"+o),i}},n.downloadUrl=function(t,n){if(t&&String(t).length){n||(n={});var a=`${e.apiURL}/download/${t}`;r(0,n);var i=e.utils.mapParameters(n);return i.length&&(a+="?"+i),a}},n.posterUrl=function(n,a,i,o){if(n&&String(n).length){o||(o={});var u,s=window.screen.width||1920;window.screen.width,u=t?1920:1200,s<=768&&(u=t?1536:768),s<=320&&(u=t?640:320),a||i?(a&&(o.w=a,i||(o.h=Math.round(a*(9/16)))),i&&(o.h=i)):(o.w=u,o.h=Math.round(u*(9/16)));var l=`${e.apiURL}/get/${n}/poster`;r(0,o);var c=e.utils.mapParameters(o);return c.length&&(l+="?"+c),l}},n.imageUrl=function(n,a,i,o){if(n&&String(n).length){o||(o={});var u,s=e.apiURL+"/get/"+n;u=t?1920:1200,$window.screen.width<=768&&(u=t?1536:768),$window.screen.width<=320&&(u=t?640:320),a||i?(a&&(o.w=a),i&&(o.h=i)):o.w=u,o.quality||(o.quality=90),r(0,o);var l=e.utils.mapParameters(o);return l.length&&(s+="?"+l),s}},n},c=n(8),p=n.n(c),f={mapParameters:function(e){return p.a.map(e,function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")},arrayIDs:function(e,t){return e?p.a.chain(e).compact().map(function(e){return f.getStringID(e,t)}).compact().uniq().value():e},getStringID:function(e,t){return e?e._id?String(e._id):String(e):e}},h=f,d=function(e){switch(e||(e={}),e.apiURL&&e.apiURL.length||(e.apiURL="production"),e.apiURL){case"production":e.apiURL="https://api.fluro.io";break;case"staging":e.apiURL="https://api.staging.fluro.io";break;case"local":e.apiURL="http://api.fluro.localhost:3000"}var t={apiURL:e.apiURL};return Object.defineProperty(t,"api",{value:new u(t),writable:!1}),Object.defineProperty(t,"auth",{value:new s(t),writable:!1}),Object.defineProperty(t,"asset",{value:new l(t),writable:!1}),Object.defineProperty(t,"utils",{value:new h(t),writable:!1}),t};t.default=d}});